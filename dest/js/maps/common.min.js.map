{"version":3,"names":[],"mappings":"","sources":["common.js"],"sourcesContent":["$(document).ready(function () {\r\n  lazy();\r\n  tradersSlider();\r\n  slider();\r\n  feed();\r\n  inputs();\r\n  submit();\r\n});\r\n//загрузка видео после загрузки всей страницы\r\nwindow.addEventListener('load', \r\n    function() { \r\n      setTimeout(function() {\r\n        backgroundVideo();\r\n      }, 1000)\r\n  }, false);\r\n\r\n$(window).resize(function () {\r\n  innerWidth = $('body').innerWidth();\r\n});\r\n\r\nvar innerWidth = $('body').innerWidth(),\r\nvideoLoaded;\r\n\r\n\r\n//inputs\r\nfunction inputs() {\r\n\r\n  $('select').selectric();\r\n\r\n  function addRub (val) {\r\n    return val + \" $\";\r\n  }\r\n  \r\n  function removeUsd (val) {\r\n    val = val.replace(\" $\", \"\");\r\n      val = val.replace(\"$\", \"\");\r\n      val = val.replace(\" \", \"\");\r\n      return val;\r\n  }\r\n  $('.usd-input').bind(\"change keyup input click\", function() {\r\n    if (this.value.match(/[^0-9]/g)) {\r\n    this.value = this.value.replace(/[^0-9 $]/g, '');\r\n    }\r\n  });\r\n  \r\n  $(\".usd-input\").on(\"input\", function () {\r\n    var $this = $(this);\r\n      var val = $this.prop(\"value\");\r\n      var newVal = removeUsd(val);\r\n      newVal = addRub(newVal);\r\n      $this.prop(\"value\", newVal);\r\n  });\r\n}\r\n//lazy\r\nfunction lazy() {\r\n  $(\".lazy\").Lazy({\r\n    visibleOnly: true,\r\n    threshold: '',\r\n    effect: 'fadeIn',\r\n    effectTime: '300'\r\n  });\r\n}\r\n//bg\r\nfunction backgroundVideo() {\r\n    $('.jquery-background-video-wrapper').append('<video class=\"my-background-video jquery-background-video\" loop autoplay muted playsinline><source class=\"video-source\" src=\"videos/optimazed.mp4\" type=\"video/mp4\"><source class=\"video-source\" src=\"videos/optimazed.webm\" type=\"video/webm\"></video>');\r\n    $('.my-background-video').bgVideo ({\r\n      fullScreen : false, \r\n      fadeIn : 500,\r\n      fadeOnPause : false,\r\n      fadeOnEnd : true,\r\n      showPausePlay: false\r\n    });\r\n    videoLoaded = true;\r\n}\r\n\r\n//rss feed\r\nfunction feed() {\r\n  $(\".news-feed__list\").liScroll({travelocity: 0.1});\r\n}\r\n//relevance-slider\r\nfunction slider() {\r\n  var slider = $('.relevance-slider');\r\n\r\n  slider.slick({\r\n    dots: true,\r\n    arrows: true,\r\n    infinite: true,\r\n    speed: 300,\r\n    slidesToShow: 1,\r\n    touchThreshold: 20,\r\n    adaptiveHeight:true,\r\n    responsive: [\r\n      {\r\n        breakpoint: 576,\r\n        settings: {\r\n          arrows: false\r\n        }\r\n      }\r\n    ]\r\n  });\r\n}\r\n\r\n//traders-slider\r\nfunction tradersSlider() {\r\n  var slider = $('.trades-slider'),\r\n      $tabLink = $('.trades-slide__container'),\r\n      $tab = $('.trades__chart-tab');\r\n\r\n  slider.slick({\r\n    dots: false,\r\n    arrows: false,\r\n    infinite: false,\r\n    speed: 300,\r\n    slidesToShow: 5,\r\n    slidesToScroll: 1,\r\n    touchThreshold: 20,\r\n    responsive: [\r\n      {\r\n        breakpoint: 1200,\r\n        settings: {\r\n          slidesToShow: 4,\r\n          dots: true\r\n        }\r\n      },\r\n      {\r\n        breakpoint: 992,\r\n        settings: {\r\n          slidesToShow: 3,\r\n          dots: true\r\n        }\r\n      },\r\n      {\r\n        breakpoint: 768,\r\n        settings: {\r\n          slidesToShow: 2,\r\n          dots: true\r\n        }\r\n      },\r\n      {\r\n        breakpoint: 460,\r\n        settings: {\r\n          slidesToShow: 1,\r\n          dots: true\r\n        }\r\n      }\r\n    ]\r\n  });\r\n  slider.on('afterChange', function(){\r\n    lazy();\r\n  });\r\n\r\n  //tabs\r\n  $tabLink.on('click', function(event) {\r\n    event.preventDefault();\r\n    var id = $(this).attr('href');\r\n    $tabLink.parent().removeClass('trades-slide_active');\r\n    $(this).parent().addClass('trades-slide_active');\r\n    $tab.removeClass('trades__chart-tab_visible');\r\n    $(id).addClass('trades__chart-tab_visible');\r\n    stateTabs();\r\n  })\r\n\r\n  function stateTabs() {\r\n    $tab.hide();\r\n    $tab.each(function() {\r\n      if($(this).hasClass('trades__chart-tab_visible')) {\r\n        $(this).fadeIn(300);\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n//submit\r\nfunction submit() {\r\n  var requiredInput = $('.input_required'),\r\n      checkbox = $('.checkbox__input'),\r\n      form = $('.home-form__form');\r\n\r\n  form.submit(function(e) {\r\n    var empty = $(this).find(requiredInput).filter(function() {\r\n      return this.value === \"\";\r\n    });\r\n    if (!empty.length && checkbox.prop(\"checked\")) {\r\n      //Если все графы заполнены и согласие дано, то показываем popup\r\n      thanksPopup();\r\n      //очищаем все данные полей, кроме кнопок\r\n      form.find('input').not(':button, :submit').val('');\r\n      checkbox.prop('checked', false);\r\n    }\r\n    e.preventDefault();\r\n  });\r\n}\r\n\r\nfunction thanksPopup() {\r\n  var popup = $('.popup-thanks');\r\n\r\n  popup.fadeIn(300);\r\n  setTimeout(function() {\r\n    popup.fadeOut(300);\r\n  }, 2500)\r\n}\r\n"],"file":"../common.min.js"}